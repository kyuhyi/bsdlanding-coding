# 📚 배포 관련 문서 안내

CORS 문제 해결을 위한 모든 문서를 한눈에!

## 🎯 당신에게 필요한 문서는?

### 급하신 분 → 바로 배포하고 싶어요!
👉 **[빠른_배포_가이드.md](빠른_배포_가이드.md)** (5분 완성)
- 체크리스트 형식
- 단계별 간단 설명
- 복사/붙여넣기 중심

### 처음 배포하시는 분 → 자세한 설명이 필요해요
👉 **[CORS_FIX_DEPLOYMENT_GUIDE.md](CORS_FIX_DEPLOYMENT_GUIDE.md)** (완전 가이드)
- 각 단계별 스크린샷 위치 설명
- 트러블슈팅 섹션 포함
- 검증 방법 상세 안내

### 문제 원인이 궁금하신 분 → 왜 CORS 에러가 났나요?
👉 **[CORS_문제_해결_요약.md](CORS_문제_해결_요약.md)** (기술 설명)
- 문제 원인 분석
- 수정 전/후 코드 비교
- 기대 효과 설명

### 개발자 분 → 코드 전체를 보고 싶어요
👉 **[GOOGLE_APPS_SCRIPT_FINAL.js](GOOGLE_APPS_SCRIPT_FINAL.js)** (완전한 코드)
- CORS 수정 완료된 전체 코드
- Google Apps Script Code.gs에 그대로 붙여넣기

## 📋 파일 목록

### 배포 가이드 문서
| 파일명 | 용도 | 대상 |
|--------|------|------|
| `빠른_배포_가이드.md` | 5분 빠른 배포 | 급하신 분 |
| `CORS_FIX_DEPLOYMENT_GUIDE.md` | 상세 배포 가이드 | 초보자 |
| `CORS_문제_해결_요약.md` | 기술 설명 | 개발자 |
| `배포_파일_안내.md` | 이 문서 | 모든 분 |

### 코드 파일
| 파일명 | 용도 | 사용처 |
|--------|------|--------|
| `GOOGLE_APPS_SCRIPT_FINAL.js` | 완전한 백엔드 코드 | Google Apps Script |
| `.env.local` | 로컬 환경변수 | 로컬 개발 |
| `.env.example` | 환경변수 템플릿 | 참고용 |

### 참고 문서
| 파일명 | 용도 | 업데이트 |
|--------|------|----------|
| `CHATBOT_SETUP.md` | 초기 설정 가이드 | 변경 없음 |
| `DEPLOYMENT_UPDATE.md` | 배포 히스토리 | 2025-11-08 |
| `REDEPLOY_TRIGGER.md` | 재배포 기록 | 참고용 |

## 🚀 추천 배포 순서

### Option A: 빠른 배포 (5분)
```
1. 빠른_배포_가이드.md 열기
2. 체크리스트 따라 실행
3. 완료!
```

### Option B: 안전 배포 (15분)
```
1. CORS_문제_해결_요약.md 읽기 (문제 이해)
2. CORS_FIX_DEPLOYMENT_GUIDE.md 열기 (상세 가이드)
3. 단계별 실행
4. 검증 완료
```

### Option C: 개발자 배포
```
1. GOOGLE_APPS_SCRIPT_FINAL.js 검토
2. CORS 수정 사항 확인
3. 코드 복사 → 배포
4. 테스트 실행
```

## 🔧 배포 준비물

### 필수 항목
- [ ] Google Apps Script 접근 권한
- [ ] Google Sheets ID: `1DEhTSmZErDEMRaz2YYlEscBdMzyHLpf6Y6-zX39warA`
- [ ] Gemini API Key: (환경변수로 보안 유지)
- [ ] Vercel 프로젝트 관리 권한

### 확인 사항
- [ ] Google Apps Script 프로젝트명: "BSD Chatbot Backend"
- [ ] Vercel 프로젝트: bsdmvp.vercel.app
- [ ] 환경변수명: `NEXT_PUBLIC_CHATBOT_API_URL`

## ⚠️ 중요 주의사항

### 1. 코드 저장 필수
```
Google Apps Script에서 코드 수정 후
반드시 Ctrl+S 또는 "파일 > 저장"
```

### 2. 새 배포 생성
```
기존 배포 수정이 아닌
"새 배포" 생성 필수!
```

### 3. 환경변수 교체
```
Vercel 환경변수를
새 배포 URL로 완전히 교체
```

### 4. 재배포 필수
```
Vercel 환경변수 변경 후
반드시 "Redeploy" 클릭
```

## 🎯 성공 확인 방법

### 1단계: 브라우저 테스트
```
✅ 챗봇 아이콘 클릭
✅ 메시지 전송
✅ AI 응답 수신
✅ CORS 에러 없음
```

### 2단계: 개발자 도구
```
F12 → Network 탭
✅ Status: 200 OK
✅ Response Headers에 "access-control-allow-origin" 있음
```

### 3단계: Google Sheets
```
✅ Sheet1에 대화 내용 저장됨
✅ UserInfo에 세션 정보 저장됨
✅ Timestamp 정상
```

## 📞 문제 해결

### CORS 에러 계속 발생
👉 [CORS_FIX_DEPLOYMENT_GUIDE.md → 트러블슈팅 섹션](CORS_FIX_DEPLOYMENT_GUIDE.md#트러블슈팅)

### Google Sheets 저장 안 됨
👉 [CORS_FIX_DEPLOYMENT_GUIDE.md → Google Sheets 확인](CORS_FIX_DEPLOYMENT_GUIDE.md#google-sheets에-데이터가-저장-안-되는-경우)

### 응답 느림
👉 [CHATBOT_SETUP.md → 트러블슈팅](CHATBOT_SETUP.md#응답이-느림)

## 📝 배포 후 확인 사항

### 즉시 확인
- [ ] 챗봇 응답 정상 작동
- [ ] CORS 에러 없음
- [ ] Google Sheets 데이터 저장

### 24시간 후 확인
- [ ] 여러 세션에서 정상 작동
- [ ] UserInfo 시트 정상 업데이트
- [ ] 대화 기록 유지 확인

### 1주일 후 확인
- [ ] Google Sheets 데이터 축적 확인
- [ ] Gemini API quota 정상
- [ ] 성능 이슈 없음

---

## 🎉 배포 완료 시

축하합니다! 🎊

이제 다음 기능들이 모두 작동합니다:
- ✅ Vercel → Google Apps Script 정상 통신
- ✅ Gemini 2.0 Flash AI 응답
- ✅ BSD 바이브코딩 전문 상담
- ✅ Google Sheets 자동 저장
- ✅ 세션 관리 및 대화 기록
- ✅ 폴백 응답 시스템

**다음 단계**: 챗봇 사용량 모니터링 및 응답 품질 개선!

---

**마지막 업데이트**: 2025-11-08
**문서 버전**: 1.0
**배포 상태**: CORS 완전 수정 완료
