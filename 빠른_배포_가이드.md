# 🚀 빠른 배포 가이드 (5분 완성)

## 1️⃣ Google Apps Script 코드 교체

```
📍 위치: https://script.google.com
📂 프로젝트: BSD Chatbot Backend
```

### 작업
1. Code.gs 열기
2. **Ctrl+A** → **Delete** (전체 삭제)
3. `GOOGLE_APPS_SCRIPT_FINAL.js` 파일 열기
4. **Ctrl+A** → **Ctrl+C** (전체 복사)
5. Code.gs에 **Ctrl+V** (붙여넣기)
6. **Ctrl+S** (저장) ⭐ 중요!

## 2️⃣ 테스트 실행

```
📍 Google Apps Script 편집기
```

### 작업
1. 함수 선택: `testChat`
2. **실행** 버튼 클릭
3. 권한 요청 나오면 → 승인
4. ✅ 로그에 정상 응답 확인

## 3️⃣ 새 배포

```
📍 Google Apps Script 편집기 우측 상단
```

### 작업
1. **배포** → **새 배포** 클릭
2. 톱니바퀴 → **웹 앱** 선택
3. 설정:
   - 설명: `BSD Chatbot v2 - CORS Fixed`
   - 실행: **나**
   - 액세스: **모든 사용자 (익명 사용자 포함)**
4. **배포** 클릭
5. 📋 **웹 앱 URL 복사** (전체!)

## 4️⃣ Vercel 환경변수 업데이트

```
📍 https://vercel.com/dashboard
```

### 작업
1. 프로젝트 선택
2. **Settings** → **Environment Variables**
3. `NEXT_PUBLIC_CHATBOT_API_URL` 찾기
4. **Edit** 클릭
5. Value에 복사한 URL 붙여넣기
6. **Save**
7. **Deployments** 탭 → **Redeploy** 클릭

## 5️⃣ 검증

```
📍 배포된 Vercel 사이트
```

### 확인
1. 사이트 열기
2. 챗봇 아이콘 클릭
3. 메시지 전송: "안녕하세요"
4. ✅ AI 응답 확인
5. ✅ [Google Sheets](https://docs.google.com/spreadsheets/d/1DEhTSmZErDEMRaz2YYlEscBdMzyHLpf6Y6-zX39warA/edit) 데이터 확인

---

## ⚡ 문제 해결 (Quick Fix)

### CORS 에러 여전히 발생
```bash
# 브라우저 캐시 완전 삭제
Ctrl + Shift + Delete → 전체 삭제

# 하드 리프레시
Ctrl + F5
```

### Google Sheets 저장 안 됨
```javascript
// Google Apps Script에서 실행
setupInitialSheets()
```

### 배포 URL 확인
```
현재 배포 ID 확인:
Vercel → Settings → Environment Variables →
NEXT_PUBLIC_CHATBOT_API_URL 값 확인
```

---

## 📝 체크리스트

배포 전:
- [ ] Code.gs 코드 교체 완료
- [ ] Ctrl+S로 저장
- [ ] testChat() 실행 성공
- [ ] 새 배포 생성
- [ ] 배포 URL 복사

배포 후:
- [ ] Vercel 환경변수 업데이트
- [ ] Vercel 재배포
- [ ] 챗봇 응답 정상
- [ ] Google Sheets 저장 확인

---

## 🎯 예상 소요 시간

| 단계 | 시간 |
|------|------|
| 코드 교체 | 1분 |
| 테스트 | 30초 |
| 새 배포 | 1분 |
| Vercel 업데이트 | 1분 |
| 재배포 대기 | 1-2분 |
| **전체** | **약 5분** |

---

**완료!** 🎉 이제 챗봇이 정상 작동하며 모든 대화가 Google Sheets에 저장됩니다!
